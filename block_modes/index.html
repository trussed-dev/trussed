<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This crate contains generic implementation of block cipher modes of operation."><meta name="keywords" content="rust, rustlang, rust-lang, block_modes"><title>block_modes - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/RustCrypto/meta/master/logo.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../block_modes/index.html"><div class="logo-container"><img src="https://raw.githubusercontent.com/RustCrypto/meta/master/logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../block_modes/index.html"><div class="logo-container">
                    <img src="https://raw.githubusercontent.com/RustCrypto/meta/master/logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate block_modes</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.8.1</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></div></section><div id="sidebar-vars" data-name="block_modes" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../block_modes/index.html">
                        <img src="https://raw.githubusercontent.com/RustCrypto/meta/master/logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">block_modes</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/block_modes/lib.rs.html#1-111">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This crate contains generic implementation of <a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation">block cipher modes of
operation</a>.</p>
<p>Note that some block modes (such as CTR, CFB, and OFB) transform block ciphers
into stream ciphers. Implementations in this crate require padding, so if you
want use those modes as stream ciphers (i.e. without padding), then check out
crates in the <a href="https://github.com/RustCrypto/stream-ciphers">RustCrypto/stream-ciphers</a> repository.</p>
<h2 id="usage-example"><a href="#usage-example">Usage example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">aes::Aes128</span>;
<span class="kw">use</span> <span class="ident">block_modes</span>::{<span class="ident">BlockMode</span>, <span class="ident">Cbc</span>};
<span class="kw">use</span> <span class="ident">block_modes::block_padding::Pkcs7</span>;
<span class="kw">use</span> <span class="ident">hex_literal::hex</span>;

<span class="comment">// create an alias for convenience</span>
<span class="kw">type</span> <span class="ident">Aes128Cbc</span> <span class="op">=</span> <span class="ident">Cbc</span><span class="op">&lt;</span><span class="ident">Aes128</span>, <span class="ident">Pkcs7</span><span class="op">&gt;</span>;

<span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> <span class="macro">hex!</span>(<span class="string">&quot;000102030405060708090a0b0c0d0e0f&quot;</span>);
<span class="kw">let</span> <span class="ident">iv</span> <span class="op">=</span> <span class="macro">hex!</span>(<span class="string">&quot;f0f1f2f3f4f5f6f7f8f9fafbfcfdfeff&quot;</span>);
<span class="kw">let</span> <span class="ident">plaintext</span> <span class="op">=</span> <span class="string">b&quot;Hello world!&quot;</span>;
<span class="kw">let</span> <span class="ident">cipher</span> <span class="op">=</span> <span class="ident">Aes128Cbc::new_from_slices</span>(<span class="kw-2">&amp;</span><span class="ident">key</span>, <span class="kw-2">&amp;</span><span class="ident">iv</span>).<span class="ident">unwrap</span>();

<span class="comment">// buffer must have enough space for message+padding</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">buffer</span> <span class="op">=</span> [<span class="number">0u8</span>; <span class="number">32</span>];
<span class="comment">// copy message to the buffer</span>
<span class="kw">let</span> <span class="ident">pos</span> <span class="op">=</span> <span class="ident">plaintext</span>.<span class="ident">len</span>();
<span class="ident">buffer</span>[..<span class="ident">pos</span>].<span class="ident">copy_from_slice</span>(<span class="ident">plaintext</span>);
<span class="kw">let</span> <span class="ident">ciphertext</span> <span class="op">=</span> <span class="ident">cipher</span>.<span class="ident">encrypt</span>(<span class="kw-2">&amp;mut</span> <span class="ident">buffer</span>, <span class="ident">pos</span>).<span class="ident">unwrap</span>();

<span class="macro">assert_eq!</span>(<span class="ident">ciphertext</span>, <span class="macro">hex!</span>(<span class="string">&quot;1b7a4c403124ae2fb52bedc534d82fa8&quot;</span>));

<span class="comment">// re-create cipher mode instance</span>
<span class="kw">let</span> <span class="ident">cipher</span> <span class="op">=</span> <span class="ident">Aes128Cbc::new_from_slices</span>(<span class="kw-2">&amp;</span><span class="ident">key</span>, <span class="kw-2">&amp;</span><span class="ident">iv</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">buf</span> <span class="op">=</span> <span class="ident">ciphertext</span>.<span class="ident">to_vec</span>();
<span class="kw">let</span> <span class="ident">decrypted_ciphertext</span> <span class="op">=</span> <span class="ident">cipher</span>.<span class="ident">decrypt</span>(<span class="kw-2">&amp;mut</span> <span class="ident">buf</span>).<span class="ident">unwrap</span>();

<span class="macro">assert_eq!</span>(<span class="ident">decrypted_ciphertext</span>, <span class="ident">plaintext</span>);</code></pre></div>
<p>With an enabled <code>alloc</code> feature (which is enabled by default) you can use
<code>encrypt_vec</code> and <code>descrypt_vec</code> methods:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">cipher</span> <span class="op">=</span> <span class="ident">Aes128Cbc::new_from_slices</span>(<span class="kw-2">&amp;</span><span class="ident">key</span>, <span class="kw-2">&amp;</span><span class="ident">iv</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">ciphertext</span> <span class="op">=</span> <span class="ident">cipher</span>.<span class="ident">encrypt_vec</span>(<span class="ident">plaintext</span>);

<span class="macro">assert_eq!</span>(<span class="ident">ciphertext</span>, <span class="macro">hex!</span>(<span class="string">&quot;1b7a4c403124ae2fb52bedc534d82fa8&quot;</span>));

<span class="kw">let</span> <span class="ident">cipher</span> <span class="op">=</span> <span class="ident">Aes128Cbc::new_from_slices</span>(<span class="kw-2">&amp;</span><span class="ident">key</span>, <span class="kw-2">&amp;</span><span class="ident">iv</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">decrypted_ciphertext</span> <span class="op">=</span> <span class="ident">cipher</span>.<span class="ident">decrypt_vec</span>(<span class="kw-2">&amp;</span><span class="ident">ciphertext</span>).<span class="ident">unwrap</span>();

<span class="macro">assert_eq!</span>(<span class="ident">decrypted_ciphertext</span>, <span class="ident">plaintext</span>);</code></pre></div>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.block_padding"><code>pub use <a class="mod" href="../block_padding/index.html" title="mod block_padding">block_padding</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item" id="reexport.cipher"><code>pub use <a class="mod" href="../cipher/index.html" title="mod cipher">cipher</a>;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.BlockModeError.html" title="block_modes::BlockModeError struct">BlockModeError</a></div><div class="item-right docblock-short"><p>Block mode error.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Cbc.html" title="block_modes::Cbc struct">Cbc</a></div><div class="item-right docblock-short"><p><a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#CBC">Cipher Block Chaining</a> (CBC) block cipher mode instance.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Cfb.html" title="block_modes::Cfb struct">Cfb</a></div><div class="item-right docblock-short"><p><a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_feedback_(CFB)">Cipher feedback</a> (CFB) block mode instance with a full block feedback.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Cfb8.html" title="block_modes::Cfb8 struct">Cfb8</a></div><div class="item-right docblock-short"><p><a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_feedback_(CFB)">Cipher feedback</a> (CFB) block mode instance with a full block feedback.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Ecb.html" title="block_modes::Ecb struct">Ecb</a></div><div class="item-right docblock-short"><p><a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#ECB">Electronic Codebook</a> (ECB) block cipher mode instance.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Ige.html" title="block_modes::Ige struct">Ige</a></div><div class="item-right docblock-short"><p><a href="https://www.links.org/files/openssl-ige.pdf">Infinite Garble Extension</a> (IGE) block cipher mode instance.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.InvalidKeyIvLength.html" title="block_modes::InvalidKeyIvLength struct">InvalidKeyIvLength</a></div><div class="item-right docblock-short"><p>Invalid key or IV length error.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Ofb.html" title="block_modes::Ofb struct">Ofb</a></div><div class="item-right docblock-short"><p><a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_feedback_(CFB)">Output feedback</a> (OFB) block mode instance with a full block feedback.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Pcbc.html" title="block_modes::Pcbc struct">Pcbc</a></div><div class="item-right docblock-short"><p><a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#PCBC">Propagating Cipher Block Chaining</a> (PCBC) mode instance.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.BlockMode.html" title="block_modes::BlockMode trait">BlockMode</a></div><div class="item-right docblock-short"><p>Trait for a block cipher mode of operation that is used to apply a block cipher
operation to input data to transform it into a variable-length output message.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.IvState.html" title="block_modes::IvState trait">IvState</a></div><div class="item-right docblock-short"><p>Trait for a BlockMode, used to obtain the current state in the form of an IV
that can initialize a BlockMode later and resume the original operation.</p>
</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="block_modes" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.62.0 (a8314ef7d 2022-06-27)" ></div>
</body></html>