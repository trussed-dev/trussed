<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Generic implementation of Hash-based Message Authentication Code (HMAC)."><meta name="keywords" content="rust, rustlang, rust-lang, hmac"><title>hmac - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/RustCrypto/meta/master/logo.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../hmac/index.html"><div class="logo-container"><img src="https://raw.githubusercontent.com/RustCrypto/meta/master/logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../hmac/index.html"><div class="logo-container">
                    <img src="https://raw.githubusercontent.com/RustCrypto/meta/master/logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate hmac</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.11.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">hmac</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/hmac/lib.rs.html#1-213">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Generic implementation of Hash-based Message Authentication Code (HMAC).</p>
<p>To use it you’ll need a cryptographic hash function implementation from
RustCrypto project. You can either import specific crate (e.g. <code>sha2</code>), or
meta-crate <code>crypto-hashes</code> which reexport all related crates.</p>
<h2 id="usage"><a href="#usage">Usage</a></h2>
<p>Let us demonstrate how to use HMAC using SHA256 as an example.</p>
<p>To get the authentication code:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>sha2::Sha256;
<span class="kw">use </span>hmac::{Hmac, Mac, NewMac};

<span class="comment">// Create alias for HMAC-SHA256
</span><span class="kw">type </span>HmacSha256 = Hmac&lt;Sha256&gt;;

<span class="comment">// Create HMAC-SHA256 instance which implements `Mac` trait
</span><span class="kw">let </span><span class="kw-2">mut </span>mac = HmacSha256::new_from_slice(<span class="string">b&quot;my secret and secure key&quot;</span>)
    .expect(<span class="string">&quot;HMAC can take key of any size&quot;</span>);
mac.update(<span class="string">b&quot;input message&quot;</span>);

<span class="comment">// `result` has type `Output` which is a thin wrapper around array of
// bytes for providing constant time equality check
</span><span class="kw">let </span>result = mac.finalize();
<span class="comment">// To get underlying array use `into_bytes` method, but be careful, since
// incorrect use of the code value may permit timing attacks which defeat
// the security provided by the `Output`
</span><span class="kw">let </span>code_bytes = result.into_bytes();</code></pre></div>
<p>To verify the message:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>mac = HmacSha256::new_from_slice(<span class="string">b&quot;my secret and secure key&quot;</span>)
    .expect(<span class="string">&quot;HMAC can take key of any size&quot;</span>);

mac.update(<span class="string">b&quot;input message&quot;</span>);

<span class="comment">// `verify` will return `Ok(())` if code is correct, `Err(MacError)` otherwise
</span>mac.verify(<span class="kw-2">&amp;</span>code_bytes).unwrap();</code></pre></div>
<h2 id="block-and-input-sizes"><a href="#block-and-input-sizes">Block and input sizes</a></h2>
<p>Usually it is assumed that block size is larger than output size, due to the
generic nature of the implementation this edge case must be handled as well
to remove potential panic scenario. This is done by truncating hash output
to the hash block size if needed.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.crypto_mac"><code>pub use <a class="mod" href="../crypto_mac/index.html" title="mod crypto_mac">crypto_mac</a>;</code></div></div><div class="item-row"><div class="item-left import-item" id="reexport.digest"><code>pub use <a class="mod" href="../digest/index.html" title="mod digest">digest</a>;</code></div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Hmac.html" title="hmac::Hmac struct">Hmac</a></div><div class="item-right docblock-short">The <code>Hmac</code> struct represents an HMAC using a given hash function <code>D</code>.</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Mac.html" title="hmac::Mac trait">Mac</a></div><div class="item-right docblock-short">The <a href="trait.Mac.html" title="Mac"><code>Mac</code></a> trait defines methods for a Message Authentication algorithm.</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.NewMac.html" title="hmac::NewMac trait">NewMac</a></div><div class="item-right docblock-short">Instantiate a <a href="trait.Mac.html" title="Mac"><code>Mac</code></a> algorithm.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="hmac" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>