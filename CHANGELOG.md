# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added

- Added `init_raw` constructor for types generated by the `store!` macro.
- Added `FilesystemClient::entry_metadata` syscall.
- Added `Syscall` implementation for `Service`.
- Added `Syscall::try_into_new_client` service.
- Added serializable flag to `StorageAttributes` for key agreement.
- Added virtual platform in `virt` module.
- Added methods for creating the client stores to `ServiceResources`.
- Implemented `unsafe_inject_key` for Aes256Cbc, Ed255, X255, P256.
- Added support for custom backends in `backend` module.
- Added optional support for API extensions in `serde_extensions` module
  behind the `serde-extensions` feature.

### Changed

- Set `config::MAX_SERVICE_CLIENTS` based on the clients-? feature.
- Made `StorageAttributes` non-exhaustive.
- Changed `KeyStore<P: Platform>` to `KeyStore<S: Store>`.
- Replaced the client ID with a `ClientContext` struct.
- Always trigger syscall in `PollClient::request` and remove
  `PollClient::syscall`.
- Upgrade the `interchange` dependency to version 0.3.0 ([#99][])
  - As a consequence the type `pipe::TrussedInterchange` becomes a const`pipe::TRUSSED_INTERCHANGE`

### Fixed

- Fixed off-by-one error in `RandomBytes` request.
- Fixed a race condition when iterating over the filesystem in more than one
  client ([#64]).
- Fixed missing path validation in `Filestore` that allowed clients to escape
  their namespace ([#65]).
- wrap_key: Don't replace associated data with an empty array

[#64]: https://github.com/trussed-dev/trussed/issues/64
[#65]: https://github.com/trussed-dev/trussed/issues/65
[#99]: https://github.com/trussed-dev/trussed/issues/99

## [0.1.0] - 2022-01-26

Initial release.

[Unreleased]: https://github.com/trussed-dev/trussed/compare/0.1.0...HEAD
[0.1.0]: https://github.com/trussed-dev/trussed/releases/tag/v0.1.0
